"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4281],{28453:(t,e,a)=>{a.d(e,{R:()=>r,x:()=>s});var o=a(96540);const i={},n=o.createContext(i);function r(t){const e=o.useContext(n);return o.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function s(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:r(t.components),o.createElement(n.Provider,{value:e},t.children)}},54988:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"open_datasets/aria_digital_twin_dataset/advanced_tutorials/depth_maps_to_pointcloud","title":"Creating pointclouds from depth maps & RGB images","description":"This tutorial will walk you through how to take the depth maps and RGB images from Aria Digital Twin (ADT) and convert to a colored 3D pointcloud in the Scene coordinate frame.","source":"@site/docs/open_datasets/aria_digital_twin_dataset/advanced_tutorials/depth_maps_to_pointcloud.mdx","sourceDirName":"open_datasets/aria_digital_twin_dataset/advanced_tutorials","slug":"/open_datasets/aria_digital_twin_dataset/advanced_tutorials/depth_maps_to_pointcloud","permalink":"/projectaria_tools/docs/open_datasets/aria_digital_twin_dataset/advanced_tutorials/depth_maps_to_pointcloud","draft":false,"unlisted":false,"editUrl":"https://github.com/facebookresearch/projectaria_tools/tree/main/website/docs/open_datasets/aria_digital_twin_dataset/advanced_tutorials/depth_maps_to_pointcloud.mdx","tags":[],"version":"current","sidebarPosition":70,"frontMatter":{"sidebar_position":70,"title":"Creating pointclouds from depth maps & RGB images"},"sidebar":"tutorialSidebar","previous":{"title":"Advanced Tutorials","permalink":"/projectaria_tools/docs/open_datasets/aria_digital_twin_dataset/advanced_tutorials/"},"next":{"title":"Multi-person Synchronization","permalink":"/projectaria_tools/docs/open_datasets/aria_digital_twin_dataset/advanced_tutorials/multiperson_synchronization"}}');var i=a(74848),n=a(28453);const r={sidebar_position:70,title:"Creating pointclouds from depth maps & RGB images"},s=void 0,l={},d=[{value:"Methodology",id:"methodology",level:2},{value:"Run tutorial notebook",id:"run-tutorial-notebook",level:2},{value:"Step 0 : Install project_aria_tools package and create venv if not already done",id:"step-0--install-project_aria_tools-package-and-create-venv-if-not-already-done",level:3},{value:"Step 1 : Download codebase",id:"step-1--download-codebase",level:3},{value:"Step 2 : Run the tutorial notebook",id:"step-2--run-the-tutorial-notebook",level:3}];function c(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"This tutorial will walk you through how to take the depth maps and RGB images from Aria Digital Twin (ADT) and convert to a colored 3D pointcloud in the Scene coordinate frame."}),"\n",(0,i.jsxs)(e.p,{children:["For more information about the depth maps, go to ",(0,i.jsx)(e.a,{href:"/projectaria_tools/docs/open_datasets/aria_digital_twin_dataset/data_format#depth_imagesvrs",children:"ADT Data Formats"})]}),"\n",(0,i.jsx)(e.h2,{id:"methodology",children:"Methodology"}),"\n",(0,i.jsx)(e.p,{children:"ADT provides a depth map corresponding to each Aria image for each of the 3 cameras (1 RGB and 2 SLAM)."}),"\n",(0,i.jsx)(e.p,{children:"To create a combined 3D pointcloud with color, the tutorial will:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Get RGB image timestamps"}),"\n",(0,i.jsx)(e.li,{children:"iterate through the timestamps and sample the RGB image and depth image with that timestamp"}),"\n",(0,i.jsx)(e.li,{children:"get the camera pose at the query timestamp"}),"\n",(0,i.jsxs)(e.li,{children:["iterate through all pixels and get the RGB & XYZ data:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"back project pixel coordinate using the camera model to get the ray direction"}),"\n",(0,i.jsx)(e.li,{children:"get the ray depth from depth map using the current pixel coordinates"}),"\n",(0,i.jsx)(e.li,{children:"get the 3D point in the camera frame by multiplying the ray by its depth"}),"\n",(0,i.jsx)(e.li,{children:"transform the point from the camera frame to scene frame using the camera pose"}),"\n",(0,i.jsx)(e.li,{children:"assign RGB values using the RGB image with the current pixel coordinates"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"run-tutorial-notebook",children:"Run tutorial notebook"}),"\n",(0,i.jsxs)(e.p,{children:["You can run this tutorial on Google Colab via the ",(0,i.jsx)(e.a,{href:"https://colab.research.google.com/github/facebookresearch/projectaria_tools/blob/main/projects/AriaDigitalTwinDatasetTools/examples/adt_depth_maps_to_pointcloud_tutorial.ipynb",children:"ADT Depth Maps to Pointcloud Tutorial"}),"."]}),"\n",(0,i.jsx)(e.p,{children:"To run the notebook locally using Jupyter, follow these steps:"}),"\n",(0,i.jsx)(e.h3,{id:"step-0--install-project_aria_tools-package-and-create-venv-if-not-already-done",children:"Step 0 : Install project_aria_tools package and create venv if not already done"}),"\n",(0,i.jsxs)(e.p,{children:["Follow Step 0 to Step 3 in ",(0,i.jsx)(e.a,{href:"/projectaria_tools/docs/open_datasets/aria_digital_twin_dataset/getting_started",children:"Getting Started"}),"."]}),"\n",(0,i.jsx)(e.h3,{id:"step-1--download-codebase",children:"Step 1 : Download codebase"}),"\n",(0,i.jsxs)(e.p,{children:["Follow the instructions in ",(0,i.jsx)(e.a,{href:"/projectaria_tools/docs/data_utilities/installation/download_codebase#download-codebase",children:"Download codebase"})," to clone the code"]}),"\n",(0,i.jsx)(e.h3,{id:"step-2--run-the-tutorial-notebook",children:"Step 2 : Run the tutorial notebook"}),"\n",(0,i.jsx)(e.p,{children:"From your Python virtual environment, run:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cd $HOME/Documents/projectaria_sandbox\n\njupyter notebook projectaria_tools/projects/AriaDigitalTwinDatasetTools/examples/adt_depth_maps_to_pointcloud_tutorial.ipynb\n"})}),"\n",(0,i.jsx)(e.p,{children:"This notebook automatically downloads the 10s sample sequence. Feel free to use the ADT downloader to try on other sequences!"})]})}function p(t={}){const{wrapper:e}={...(0,n.R)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(c,{...t})}):c(t)}}}]);