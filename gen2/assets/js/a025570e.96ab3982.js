"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5162],{82900(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"client-sdk/python-sdk/auth-example","title":"Authentication Example","description":"This example demonstrates how to programmatically authenticate your Aria Gen2 device with your PC using the Python SDK. Authentication is required before you can control the device or access its features.","source":"@site/docs-ark/client-sdk/python-sdk/auth-example.mdx","sourceDirName":"client-sdk/python-sdk","slug":"/client-sdk/python-sdk/auth-example","permalink":"/projectaria_tools/gen2/ark/client-sdk/python-sdk/auth-example","draft":false,"unlisted":false,"editUrl":"https://www.internalfb.com/code/fbsource/arvr/projects/ariane/aria_research_kit/projectaria_tools/website/docs-ark/client-sdk/python-sdk/auth-example.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Authentication Example"},"sidebar":"arkSidebar","previous":{"title":"Python SDK Examples","permalink":"/projectaria_tools/gen2/ark/client-sdk/python-sdk/python-interface"},"next":{"title":"Connection Example","permalink":"/projectaria_tools/gen2/ark/client-sdk/python-sdk/connection-example"}}');var c=i(74848),s=i(28453);const o={sidebar_position:1,title:"Authentication Example"},r="Authentication Example",a={},l=[{value:"Quick Start",id:"quick-start",level:2},{value:"What This Example Does",id:"what-this-example-does",level:2},{value:"Code Walkthrough",id:"code-walkthrough",level:2},{value:"Step 1: Import Required Modules",id:"step-1-import-required-modules",level:3},{value:"Step 2: Create Device Client",id:"step-2-create-device-client",level:3},{value:"Step 3: Configure the Client",id:"step-3-configure-the-client",level:3},{value:"Step 4: Initiate Authentication",id:"step-4-initiate-authentication",level:3},{value:"Step 5: Connect and Verify",id:"step-5-connect-and-verify",level:3},{value:"Complete Example Code",id:"complete-example-code",level:2},{value:"Expected Output",id:"expected-output",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Authentication Times Out",id:"authentication-times-out",level:3},{value:"Device Not Found",id:"device-not-found",level:3},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Authentication vs Connection",id:"authentication-vs-connection",level:3},{value:"Device Object",id:"device-object",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"authentication-example",children:"Authentication Example"})}),"\n",(0,c.jsx)(n.p,{children:"This example demonstrates how to programmatically authenticate your Aria Gen2 device with your PC using the Python SDK. Authentication is required before you can control the device or access its features."}),"\n",(0,c.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,c.jsx)(n.p,{children:"Run the authentication example script:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"python ~/Downloads/projectaria_client_sdk_samples_gen2/device_auth.py\n"})}),"\n",(0,c.jsx)(n.p,{children:"When prompted, open the Companion App on your mobile device and approve the authentication request."}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"what-this-example-does",children:"What This Example Does"}),"\n",(0,c.jsx)(n.p,{children:"The script performs the following steps:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"Creates a device client to manage connections"}),"\n",(0,c.jsx)(n.li,{children:"Configures the client to connect to the first available device"}),"\n",(0,c.jsx)(n.li,{children:"Initiates the authentication process"}),"\n",(0,c.jsx)(n.li,{children:"Waits for user approval via the Companion App"}),"\n",(0,c.jsx)(n.li,{children:"Establishes a connection to verify authentication"}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"code-walkthrough",children:"Code Walkthrough"}),"\n",(0,c.jsx)(n.h3,{id:"step-1-import-required-modules",children:"Step 1: Import Required Modules"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"import time\nimport aria.sdk_gen2 as sdk_gen2\n"})}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"aria.sdk_gen2"})," module provides all the classes and functions needed to interact with Aria Gen2 devices."]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-2-create-device-client",children:"Step 2: Create Device Client"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"device_client = sdk_gen2.DeviceClient()\n"})}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"DeviceClient"})," object manages authentication and device connections. It handles the communication between your PC and the device."]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-3-configure-the-client",children:"Step 3: Configure the Client"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"config = sdk_gen2.DeviceClientConfig()\ndevice_client.set_client_config(config)\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"What this does:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Creates a default configuration that connects to the first available device"}),"\n",(0,c.jsxs)(n.li,{children:["If you want to connect to a specific device, you can set ",(0,c.jsx)(n.code,{children:"config.device_serial"})," to the device's serial number"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Example with specific device:"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'config = sdk_gen2.DeviceClientConfig()\nconfig.device_serial = "1M0YDB5H7B0020"  # Replace with your device serial\ndevice_client.set_client_config(config)\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-4-initiate-authentication",children:"Step 4: Initiate Authentication"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'print("Authenticating device. Please open the Aria app and accept the pairing request")\ndevice_client.authenticate()\ntime.sleep(5)\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"What happens here:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["The ",(0,c.jsx)(n.code,{children:"authenticate()"})," method starts the authentication process"]}),"\n",(0,c.jsx)(n.li,{children:"The device sends a pairing request to the Companion App on your mobile device"}),"\n",(0,c.jsx)(n.li,{children:"The script waits 5 seconds to give you time to approve the request"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Important:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Keep the Companion App open and in the foreground"}),"\n",(0,c.jsx)(n.li,{children:"Check for a notification or prompt in the app"}),"\n",(0,c.jsx)(n.li,{children:"Verify the hash code matches between your PC terminal and the Companion App"}),"\n",(0,c.jsx)(n.li,{children:"Approve the authentication request"}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"step-5-connect-and-verify",children:"Step 5: Connect and Verify"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'try:\n    device = device_client.connect()\n    print(f"Device authentication successful to device {device.connection_id()}")\nexcept Exception:\n    print("Failed to authenticate and connect to device")\n    return\n'})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"What this does:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Attempts to establish a connection to the authenticated device"}),"\n",(0,c.jsxs)(n.li,{children:["If successful, returns a ",(0,c.jsx)(n.code,{children:"Device"})," object that you can use for recording, streaming, etc."]}),"\n",(0,c.jsxs)(n.li,{children:["The ",(0,c.jsx)(n.code,{children:"device.connection_id()"})," provides the device identifier"]}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"complete-example-code",children:"Complete Example Code"}),"\n",(0,c.jsx)(n.p,{children:"Here's the full authentication script:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'import time\nimport aria.sdk_gen2 as sdk_gen2\n\n\ndef device_auth():\n    # Set up the device client to initiate connection to the device\n    device_client = sdk_gen2.DeviceClient()\n    try:\n        device = device_client.connect()\n        print(\n            f"Device already authenticated to this PC with serial: {device.connection_id()}"\n        )\n    except Exception:\n        # Set up the device client config to specify the device to be connected to e.g. device serial number.\n        # If nothing is specified, the first device in the list of connected devices will be connected to\n        config = sdk_gen2.DeviceClientConfig()\n        device_client.set_client_config(config)\n\n        # Authenticate the device and wait for the user to open the Aria app to accept the pairing request\n        print(\n            "Authenticating device. Please open the Aria app and accept the pairing request"\n        )\n        device_client.authenticate()\n        time.sleep(5)\n\n        # check if the device is authenticated so the the connection can be established\n        try:\n            device = device_client.connect()\n            print(\n                f"Device authentication successful to device {device.connection_id()}"\n            )\n        except Exception:\n            print(f"Failed to authenticate and connect to device")\n            return\n\nif __name__ == "__main__":\n    device_auth()\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"expected-output",children:"Expected Output"}),"\n",(0,c.jsx)(n.p,{children:"When running the script, you should see output similar to:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Authenticating device. Please open the Aria app and accept the pairing request\n[AriaGen2SDK:DeviceClient][INFO]: Client hash is: f30a36a9f3842bd3fc16c75b525...\n[AriaGen2SDK:DeviceClient][INFO]: Waiting for authentication approval...\nDevice authentication successful to device 1M0YDB5H7B0020\n"})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,c.jsx)(n.h3,{id:"authentication-times-out",children:"Authentication Times Out"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Problem:"})," The script waits but never completes authentication."]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Ensure the Companion App is running in the foreground"}),"\n",(0,c.jsx)(n.li,{children:"Check that your mobile device has an active internet connection"}),"\n",(0,c.jsx)(n.li,{children:"Verify notifications are enabled for the Companion App"}),"\n",(0,c.jsx)(n.li,{children:"Check that you approved the correct pairing request (hash codes should match)"}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h3,{id:"device-not-found",children:"Device Not Found"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Problem:"})," Error message indicates no device found."]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Verify the device is connected via USB"}),"\n",(0,c.jsxs)(n.li,{children:["Run ",(0,c.jsx)(n.code,{children:"aria-gen2 device list"})," to check connectivity"]}),"\n",(0,c.jsxs)(n.li,{children:["Ensure ",(0,c.jsx)(n.code,{children:"aria-doctor"})," has been run"]}),"\n",(0,c.jsx)(n.li,{children:"Check USB cable and port connections"}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,c.jsx)(n.h3,{id:"authentication-vs-connection",children:"Authentication vs Connection"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Authentication"}),": A one-time security handshake between device and PC (requires Companion App approval)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Connection"}),": Establishing a session with an already-authenticated device (no approval needed)"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Once authenticated, you can connect to the device repeatedly without re-authenticating."}),"\n",(0,c.jsx)(n.h3,{id:"device-object",children:"Device Object"}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"Device"})," object returned by ",(0,c.jsx)(n.code,{children:"connect()"})," is your interface for all device operations:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'device = device_client.connect()\n\n# Now you can use device for:\n# - Recording: device.start_recording()\n# - Streaming: device.start_streaming()\n# - Commands: device.render_tts("Hello")\n# - Info: device.connection_id()\n'})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Learn how to ",(0,c.jsx)(n.a,{href:"/ark/client-sdk/python-sdk/connection-example",children:"connect to a specific device"})]}),"\n",(0,c.jsxs)(n.li,{children:["Start ",(0,c.jsx)(n.a,{href:"/ark/client-sdk/python-sdk/recording-example",children:"recording data"})," from your device"]}),"\n",(0,c.jsxs)(n.li,{children:["Explore ",(0,c.jsx)(n.a,{href:"/ark/client-sdk/python-sdk/streaming-example",children:"real-time streaming"})]}),"\n",(0,c.jsxs)(n.li,{children:["Review ",(0,c.jsx)(n.a,{href:"/ark/client-sdk/python-sdk/python-interface",children:"all Python SDK examples"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},28453(e,n,i){i.d(n,{R:()=>o,x:()=>r});var t=i(96540);const c={},s=t.createContext(c);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);